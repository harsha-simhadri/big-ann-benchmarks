FROM billion-scale-benchmark

RUN apt-get update
RUN apt-get install -y git cmake liblapack-dev bc
RUN pip3 install wheel pybind11
RUN git clone -b neurips21 https://github.com/yahoojapan/NGT.git
RUN cd NGT && mkdir -p build && cd build && cmake .. 
RUN cd NGT/build && make -j 8 && make install
RUN mkdir ngt; cp NGT/bin/build.sh ngt/
RUN ldconfig
RUN cd NGT/python && python3 setup.py bdist_wheel
RUN pip3 install NGT/python/dist/ngt-*-linux_x86_64.whl

